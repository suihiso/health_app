{% extends "base.html" %}

{% block title %}–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö{% endblock %}

{% block content %}
<h2>–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h2>

<!-- –õ–∏–ø–∫–æ–µ –º–µ–Ω—é —Å —Ä–∞–∑–¥–µ–ª–∞–º–∏ -->
<div class="anchor-nav mb-4 d-flex justify-content-between">
    <!-- –ö–Ω–æ–ø–∫–∏ —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏ —Å–ª–µ–≤–∞ -->
    <div>
        <a href="{{ url_for('download_cleaned_data') }}" class="btn btn-success btn-md" data-bs-toggle="tooltip"
            title="–°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª —Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏">–°–∫–∞—á–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</a>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ —Å–ø—Ä–∞–≤–∞ -->
    <div class="ml-auto">
        <a href="{{ url_for('explore') }}" class="btn btn-outline-warning btn-md" data-bs-toggle="tooltip"
            title="–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–±–∑–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö">üìã–û–±–∑–æ—Ä –¥–∞–Ω–Ω—ã—Ö</a>
    </div>
</div>

<!-- –í—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± —É—Å–ø–µ—à–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<ul class="list-group mb-4">
    {% for category, message in messages %}
    <li class="list-group-item list-group-item-{{ category }}">{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
{% endwith %}

<!-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —Ç—Ä–µ–º—è —Å—Ç–æ–ª–±—Ü–∞–º–∏: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤, –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∫, –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π -->
<div class="row">
    <!-- –ü–µ—Ä–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤ -->
    <div class="col-md-4 mb-4 border-end d-flex flex-column justify-content-center align-items-center">
        <h4 id="drop_na">–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤</h4>
        <form method="post" class="text-center">
            <label for="na_column" class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–æ–ª–±–µ—Ü, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –ø—Ä–æ–ø—É—Å–∫–∏:</label>
            <select name="na_column" id="na_column" class="form-select mb-3">
                {% for column in columns %}
                <option value="{{ column }}">{{ column }}</option>
                {% endfor %}
            </select>

            <button type="submit" name="action" value="drop_na_rows" class="btn btn-danger mb-2"
                data-bs-toggle="tooltip" title="–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –ø—Ä–æ–ø—É—Å–∫–∏ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Å—Ç–æ–ª–±—Ü–µ">
                –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫
            </button>

            <button type="submit" name="action" value="fill_na_mean" class="btn btn-secondary mb-2"
                data-bs-toggle="tooltip"
                title="–ó–∞–º–µ–Ω–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –Ω–∞ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö)">
                –ó–∞–º–µ–Ω–∞ –Ω–∞ —Å—Ä–µ–¥–Ω–µ–µ
            </button>

            <button type="submit" name="action" value="fill_na_median" class="btn btn-secondary mb-2"
                data-bs-toggle="tooltip"
                title="–ó–∞–º–µ–Ω–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –Ω–∞ –º–µ–¥–∏–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö)">
                –ó–∞–º–µ–Ω–∞ –Ω–∞ –º–µ–¥–∏–∞–Ω—É
            </button>

            <button type="submit" name="action" value="fill_na_mode" class="btn btn-secondary mb-2"
                data-bs-toggle="tooltip"
                title="–ó–∞–º–µ–Ω–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –Ω–∞ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ª—é–±—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö)">
                –ó–∞–º–µ–Ω–∞ –Ω–∞ –º–æ–¥—É
            </button>

            <button type="submit" name="action" value="fill_na_unknown" class="btn btn-secondary mb-2"
                data-bs-toggle="tooltip"
                title="–ó–∞–º–µ–Ω–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' (—Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ—á–∏—Å–ª–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö)">
                –ó–∞–º–µ–Ω–∞ –Ω–∞ "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"
            </button>

            <div class="mb-2">–∏–ª–∏</div>

            <button type="submit" name="action" value="drop_all_na" class="btn btn-danger" data-bs-toggle="tooltip"
                title="–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –ø—Ä–æ–ø—É—Å–∫–∏ –≤ –ª—é–±–æ–º —Å—Ç–æ–ª–±—Ü–µ">
                –ë—ã—Å—Ç—Ä–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
            </button>
        </form>
    </div>

    <!-- –í—Ç–æ—Ä–æ–π —Å—Ç–æ–ª–±–µ—Ü: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∫ -->
    <div class="col-md-4 mb-4 border-end d-flex flex-column justify-content-center align-items-center">
        <h4 id="row_operations">–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∫</h4>
        <form method="post" class="text-center">
            <label for="value_column" class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–æ–ª–±–µ—Ü, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ:</label>
            <select name="value_column" id="value_column" class="form-select mb-3">
                {% for column in columns %}
                <option value="{{ column }}">{{ column }}</option>
                {% endfor %}
            </select>

            <label for="column_values" class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ:</label>
            <select name="column_values" id="column_values" class="form-select" multiple>
                {% for value in unique_values %}
                <option value="{{ value }}">{{ value }}</option>
                {% endfor %}
            </select>
            <div class="form-text mb-3">–£–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ Ctrl (Cmd), —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–π</div>

            <button type="button" class="btn btn-danger mb-2" data-bs-toggle="modal" data-bs-target="#deleteValueModal"
                data-bs-toggle="tooltip" title="–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è">
                –£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
            </button>

            <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#keepValueModal"
                data-bs-toggle="tooltip" title="–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –ù–ï —Å–æ–¥–µ—Ä–∂–∞—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è">
                –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫—Ä–æ–º–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
            </button>

            <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è -->
            <div class="modal fade" id="deleteValueModal" tabindex="-1" aria-labelledby="deleteValueModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="deleteValueModalLabel">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            –í–Ω–∏–º–∞–Ω–∏–µ! –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —É–¥–∞–ª–∏—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
                            –¥–µ–π—Å—Ç–≤–∏–µ?
                        </div>
                        <div class="modal-footer">
                            <button type="submit" name="action" value="delete_value" class="btn btn-success"
                                style="width: 75px;">–î–∞</button>
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal"
                                style="width: 75px;">–ù–µ—Ç</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π -->
            <div class="modal fade" id="keepValueModal" tabindex="-1" aria-labelledby="keepValueModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="keepValueModalLabel">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            –í–Ω–∏–º–∞–Ω–∏–µ! –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —É–¥–∞–ª–∏—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏, –ù–ï —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
                            –¥–µ–π—Å—Ç–≤–∏–µ?
                        </div>
                        <div class="modal-footer">
                            <button type="submit" name="action" value="keep_only_value" class="btn btn-success"
                                style="width: 75px;">–î–∞</button>
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal"
                                style="width: 75px;">–ù–µ—Ç</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <!-- –¢—Ä–µ—Ç–∏–π —Å—Ç–æ–ª–±–µ—Ü: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π -->
    <div class="col-md-4 mb-4 d-flex flex-column justify-content-center align-items-center">
        <h4 id="outliers">–û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π</h4>
        <form method="post" class="text-center">
            <label for="outlier_column" class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–æ–ª–±–µ—Ü, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –∞–Ω–æ–º–∞–ª—å–Ω—ã–µ
                –∑–Ω–∞—á–µ–Ω–∏—è:</label>
            <select name="outlier_column" id="outlier_column" class="form-select mb-3">
                {% for column in numeric_columns %}
                <option value="{{ column }}">{{ column }}</option>
                {% endfor %}
            </select>

            <button type="submit" name="action" value="remove_outlier_rows" class="btn btn-danger mb-2"
                data-bs-toggle="tooltip"
                title="–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –∞–Ω–æ–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Å—Ç–æ–ª–±—Ü–µ">
                –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫
            </button>

            <button type="submit" name="action" value="replace_outliers_mean" class="btn btn-secondary mb-2"
                data-bs-toggle="tooltip" title="–ó–∞–º–µ–Ω–∞ –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞">
                –ó–∞–º–µ–Ω–∞ –Ω–∞ —Å—Ä–µ–¥–Ω–µ–µ
            </button>

            <button type="submit" name="action" value="replace_outliers_median" class="btn btn-secondary mb-2"
                data-bs-toggle="tooltip" title="–ó–∞–º–µ–Ω–∞ –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –º–µ–¥–∏–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞">
                –ó–∞–º–µ–Ω–∞ –Ω–∞ –º–µ–¥–∏–∞–Ω—É
            </button>

            <button type="submit" name="action" value="replace_outliers_mode" class="btn btn-secondary mb-2"
                data-bs-toggle="tooltip" title="–ó–∞–º–µ–Ω–∞ –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ">
                –ó–∞–º–µ–Ω–∞ –Ω–∞ –º–æ–¥—É
            </button>

            <div class="mb-2">–∏–ª–∏</div>

            <button type="submit" name="action" value="remove_all_outliers" class="btn btn-danger"
                data-bs-toggle="tooltip" title="–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –∞–Ω–æ–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ª—é–±–æ–º —Å—Ç–æ–ª–±—Ü–µ">
                –ë—ã—Å—Ç—Ä–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
            </button>
        </form>
    </div>
</div>

<hr>

<!-- –ù–∏–∂–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –¥–≤—É–º—è —Å—Ç–æ–ª–±—Ü–∞–º–∏ -->
<div class="row">
    <!-- –ü–µ—Ä–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö -->
    <div class="col-md-6 mb-4 border-end d-flex flex-column justify-content-center align-items-center">
        <h4 id="filter">–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö</h4>
        <form method="post" class="text-center">
            <label for="filter_column" class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–æ–Ω–∫—É –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:</label>
            <select name="filter_column" class="form-select">
                {% for column in columns %}
                <option value="{{ column }}">{{ column }}</option>
                {% endfor %}
            </select>

            <select name="condition" class="form-select mt-2">
                <option value="==">–†–∞–≤–Ω–æ</option>
                <option value=">">–ë–æ–ª—å—à–µ</option>
                <option value="<">–ú–µ–Ω—å—à–µ</option>
                <option value="!=">–ù–µ —Ä–∞–≤–Ω–æ</option>
            </select>

            <input type="text" name="value" class="form-control mt-2" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏"
                style="font-size: 0.9em;">

            <button type="submit" name="action" value="filter" class="btn btn-secondary mt-3">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å
                –¥–∞–Ω–Ω—ã–µ</button>
        </form>
    </div>

    <!-- –í—Ç–æ—Ä–æ–π —Å—Ç–æ–ª–±–µ—Ü: –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤ -->
    <div class="col-md-6 mb-4 d-flex flex-column justify-content-center align-items-center">
        <h4 id="drop_columns">–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤</h4>
        <form method="post" class="text-center">
            <label for="columns_to_drop" class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–æ–ª–±—Ü—ã –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è:</label>
            <select name="columns_to_drop" id="columns_to_drop" class="form-select" multiple>
                {% for column in columns %}
                <option value="{{ column }}">{{ column }}</option>
                {% endfor %}
            </select>
            <button type="submit" name="action" value="drop_columns" class="btn btn-danger mt-3">–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ
                —Å—Ç–æ–ª–±—Ü—ã</button>
        </form>
    </div>
</div>

<hr>

<!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ Bootstrap -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl)
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Å—Ç–æ–ª–±—Ü–∞
        function fetchUniqueValues(columnName) {
            fetch(`/get_unique_values?column=${columnName}`)
                .then(response => response.json())
                .then(data => {
                    const selectElement = document.getElementById('column_values');
                    // –û—á–∏—Å—Ç–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
                    selectElement.innerHTML = '';

                    // –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
                    data.values.forEach(value => {
                        const option = document.createElement('option');
                        option.value = value;
                        option.textContent = value;
                        selectElement.appendChild(option);
                    });
                })
                .catch(error => console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π:', error));
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
        document.getElementById('value_column').addEventListener('change', function () {
            fetchUniqueValues(this.value);
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        const defaultColumnElement = document.getElementById('value_column');
        if (defaultColumnElement && defaultColumnElement.value) {
            fetchUniqueValues(defaultColumnElement.value);
        }
    });
</script>

{% endblock %}